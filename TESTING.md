# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏

## –ü—Ä–æ–±–ª–µ–º–∞: –≤—Ä–µ–º—è –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0 —Å–µ–∫—É–Ω–¥

–ï—Å–ª–∏ –≤—Ä–µ–º—è –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

## –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ content script –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ YouTube (–ª—é–±–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
2. –ù–∞–∂–º–∏—Ç–µ **F12** –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è DevTools
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
4. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
   - `üìú Content script –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞: https://www.youtube.com/...`
   - `üöÄ Shorts Limiter –∑–∞–ø—É—â–µ–Ω –Ω–∞ YouTube`
   - `‚úÖ Tab ID –ø–æ–ª—É—á–µ–Ω: [—á–∏—Å–ª–æ]`

**–ï—Å–ª–∏ —ç—Ç–∏—Ö –ª–æ–≥–æ–≤ –ù–ï–¢:**
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ `chrome://extensions/`
- –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É YouTube (F5)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ

## –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ YouTube Shorts

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É Shorts: https://www.youtube.com/shorts
2. –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–µ –≤–∏–¥–µ–æ Shorts (URL —Å–æ–¥–µ—Ä–∂–∏—Ç `/shorts/`)
3. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
   - `üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ Shorts:` —Å –¥–µ—Ç–∞–ª—è–º–∏
   - `üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Shorts:` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏

## –®–∞–≥ 3: –ù–∞—á–Ω–∏—Ç–µ —Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ

1. –î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ –≤–∏–¥–µ–æ –Ω–∞—á–Ω–µ—Ç –∏–≥—Ä–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
   - `‚ñ∂Ô∏è –í–∏–¥–µ–æ –Ω–∞—á–∞–ª–æ –∏–≥—Ä–∞—Ç—å`
   - `‚úÖ –£—Å–ª–æ–≤–∏—è –¥–ª—è –Ω–∞—á–∞–ª–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã`
   - `üé¨ –ù–∞—á–∞–ª–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ Shorts`
   - `üíì –û—Ç–ø—Ä–∞–≤–∫–∞ heartbeat:` –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ background script

1. –û—Ç–∫—Ä–æ–π—Ç–µ `chrome://extensions/`
2. –ù–∞–π–¥–∏—Ç–µ "Shorts Limiter"
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ **"service worker"** (—Å–∏–Ω—è—è —Å—Å—ã–ª–∫–∞)
4. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
   - `üü¢ –ù–∞—á–∞—Ç–∞ —Å–µ—Å—Å–∏—è –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ [ID]`
   - `üíì –•–∞—Ä—Ç–±–∏—Ç –æ—Ç –≤–∫–ª–∞–¥–∫–∏ [ID]` —Å increment > 0
   - `üìä –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: [—á–∏—Å–ª–æ] —Å–µ–∫—É–Ω–¥`

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ storage

–í –∫–æ–Ω—Å–æ–ª–∏ popup (–ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ popup ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å) –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
chrome.storage.local.get(['stats'], (r) => {
    console.log('Stats:', r.stats);
    console.log('Daily time:', r.stats?.dailyTime || 0, 'seconds');
    console.log('That is:', Math.floor((r.stats?.dailyTime || 0) / 60), 'minutes');
});
```

## –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. Content script –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã:** –ù–µ—Ç –ª–æ–≥–æ–≤ `üìú Content script –∑–∞–≥—Ä—É–∂–µ–Ω`
**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ manifest.json - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `"matches": ["*://*.youtube.com/*"]`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ

### 2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ Shorts
**–°–∏–º–ø—Ç–æ–º—ã:** –õ–æ–≥–∏ `üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ Shorts:` –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç `result: false`
**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL —Å–æ–¥–µ—Ä–∂–∏—Ç `/shorts/`
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤–∏–¥–µ–æ Shorts
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Shorts, –∞ –Ω–µ –Ω–∞ –æ–±—ã—á–Ω–æ–º –≤–∏–¥–µ–æ

### 3. –í–∏–¥–µ–æ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∏–≥—Ä–∞—é—â–µ–µ
**–°–∏–º–ø—Ç–æ–º—ã:** `üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Shorts:` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `videoPlaying: false`
**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ –≤–∏–¥–µ–æ –Ω–∞—á–Ω–µ—Ç –∏–≥—Ä–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ù–µ —Å—Ç–∞–≤—å—Ç–µ –≤–∏–¥–µ–æ –Ω–∞ –ø–∞—É–∑—É
- –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞

### 4. Heartbeat –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã:** –ù–µ—Ç –ª–æ–≥–æ–≤ `üíì –û—Ç–ø—Ä–∞–≤–∫–∞ heartbeat`
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `isWatchingShorts: true` –≤ –ª–æ–≥–∞—Ö
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∏–¥–µ–æ –∏–≥—Ä–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ background script –Ω–∞ –æ—à–∏–±–∫–∏

### 5. –í—Ä–µ–º—è –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã:** Heartbeat –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –Ω–æ –≤—Ä–µ–º—è –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ background script - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ `üìä –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `increment > 0` –≤ –ª–æ–≥–∞—Ö heartbeat
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ background script

## –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ YouTube Shorts:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
console.log('URL:', window.location.href);
console.log('Has ytd-shorts:', !!document.querySelector('ytd-shorts'));
console.log('Has video:', !!document.querySelector('video'));
console.log('Video playing:', !document.querySelector('video')?.paused);
```

–í—Å–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `true` –¥–ª—è —Ä–∞–±–æ—Ç—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è.

